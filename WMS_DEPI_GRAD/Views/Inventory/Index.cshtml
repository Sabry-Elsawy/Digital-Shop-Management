@{
    ViewBag.Title = "Inventory — Warehouse Manager";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container py-4" id="app-root">

        <div class="d-flex flex-column flex-sm-row align-items-start align-items-sm-center justify-content-between gap-3 mb-3">
            <div>
                <h1 class="h3 mb-0">Inventory</h1>
                <p class="text-muted small mb-0">Manage your warehouse stock levels</p>
            </div>

            <div class="d-flex gap-2">

                <button class="btn btn-outline-secondary d-flex align-items-center gap-2" data-bs-toggle="modal" data-bs-target="#adjustModal">
                    <i class="fa-solid fa-filter"></i>
                    Adjust
                </button>


                <button id="btnAddSKU" class="btn btn-primary d-flex align-items-center gap-2" data-bs-toggle="modal" data-bs-target="#createSkuModal">
                    <i class="fa-solid fa-plus"></i>
                    Add SKU
                </button>
            </div>
        </div>


        <div class="mb-3">
            <div class="input-group" style="max-width:640px;">
                <span class="input-group-text bg-white"><i class="fa-solid fa-magnifying-glass text-muted"></i></span>
                <input id="searchInput" type="search" class="form-control" placeholder="Search by SKU or product name..." aria-label="Search">
            </div>
        </div>


        <div class="card shadow-sm">
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table mb-0 align-middle">
                        <thead class="table-light">
                            <tr>
                                <th class="font-monospace">SKU</th>
                                <th>Product Name</th>
                                <th>Quantity</th>
                                <th>Location</th>
                                <th>Status</th>
                                <th>Last Updated</th>
                            </tr>
                        </thead>
                        <tbody id="inventoryTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>


    <div class="modal fade" id="createSkuModal" tabindex="-1" aria-labelledby="createSkuModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createSkuModalLabel">Add New SKU</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="createSkuCloseBtn"></button>
                </div>
                <div class="modal-body">
                    <p class="text-muted small">Add a new SKU to the inventory</p>

                    <form id="createSkuForm" novalidate>
                        <div class="mb-3">
                            <label for="skuName" class="form-label">Product Name <span class="text-danger">*</span></label>
                            <input type="text" id="skuName" name="skuName" class="form-control" placeholder="e.g., Widget A - Premium Quality" required maxlength="200" />
                            <div class="invalid-feedback">Product name is required.</div>
                        </div>

                        <div class="mb-3">
                            <label for="skuQuantity" class="form-label">Quantity <span class="text-danger">*</span></label>
                            <input type="number" id="skuQuantity" name="skuQuantity" class="form-control" value="1" min="0" required />
                            <div class="invalid-feedback">Enter a valid quantity (0 or more).</div>
                        </div>

                        <div class="mb-3">
                            <label for="skuLocation" class="form-label">Location <span class="text-danger">*</span></label>
                            <input type="text" id="skuLocation" name="skuLocation" class="form-control" placeholder="e.g., A-01-02-03" required maxlength="30" />
                            <div class="invalid-feedback">Location is required.</div>
                        </div>

                        <div class="mb-3">
                            <label for="skuStatus" class="form-label">Status</label>
                            <select id="skuStatus" class="form-select">
                                <option value="completed">Completed</option>
                                <option value="in-progress">In Progress</option>
                                <option value="pending">Pending</option>
                            </select>
                        </div>

                        <div class="d-flex gap-2 justify-content-end mt-4">
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button id="submitCreateSku" type="submit" class="btn btn-primary d-flex align-items-center">
                                <span id="skuSpinner" class="spinner-border spinner-border-sm me-2 d-none" role="status" aria-hidden="true"></span>
                                <span id="skuSubmitText">Create SKU</span>
                            </button>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>


    <div class="modal fade" id="adjustModal" tabindex="-1" aria-labelledby="adjustModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-md modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="adjustModalLabel">Inventory Adjustment</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="adjustCloseBtn"></button>
                </div>
                <div class="modal-body">
                    <p class="text-muted small">This modal is UI-only in the current demo. It does not change table data.</p>

                    <form id="adjustForm">
                        <div class="mb-3">
                            <label for="adjustSku" class="form-label">SKU</label>
                            <input type="text" id="adjustSku" class="form-control" placeholder="Enter SKU..." />
                        </div>
                        <div class="mb-3">
                            <label for="adjustQty" class="form-label">Quantity Change</label>
                            <input type="number" id="adjustQty" class="form-control" placeholder="e.g., -5 or 10" />
                        </div>
                        <div class="mb-3">
                            <label for="adjustReason" class="form-label">Reason</label>
                            <input type="text" id="adjustReason" class="form-control" placeholder="Enter reason..." />
                        </div>
                        <div class="d-flex gap-2 justify-content-end mt-4">
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="button" id="confirmAdjustBtn" class="btn btn-primary">Confirm Adjustment</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <div id="toastContainer" class="position-fixed top-0 end-0 p-3" style="z-index: 1080;">
    </div>
</div>

<!-- Scripts -->
<script src="~/js/inventory.js"></script>

